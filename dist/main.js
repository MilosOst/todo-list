(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var s=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===s?new Date(t.getTime()):"number"==typeof t||"[object Number]"===s?new Date(t):("string"!=typeof t&&"[object String]"!==s||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function s(s){return e(1,arguments),t(s).getTime()<Date.now()}function o(s){e(1,arguments);var o=t(s);return o.setHours(0,0,0,0),o}function r(t,s){e(2,arguments);var r=o(t),a=o(s);return r.getTime()===a.getTime()}function a(t){return e(1,arguments),r(t,Date.now())}function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function c(s,o){e(2,arguments);var r=t(s),a=n(o);return isNaN(a)?new Date(NaN):a?(r.setDate(r.getDate()+a),r):r}function i(t){return e(1,arguments),r(t,c(Date.now(),1))}function d(s,o){e(1,arguments);var r=o||{},a=r.locale,c=a&&a.options&&a.options.weekStartsOn,i=null==c?0:n(c),d=null==r.weekStartsOn?i:n(r.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=t(s),l=u.getDay(),m=(l<d?7:0)+l-d;return u.setDate(u.getDate()-m),u.setHours(0,0,0,0),u}function u(t,s,o){e(2,arguments);var r=d(t,o),a=d(s,o);return r.getTime()===a.getTime()}function l(t,s){return e(1,arguments),u(t,Date.now(),s)}class m{constructor(e){this.name=e,this.tasks=[]}addTask(e){this.tasks.push(e)}removeTask(e){const t=this.tasks.findIndex((t=>t.id===e));this.tasks.splice(t,1)}getTasks(){return this.tasks}setTasks(e){this.tasks=e}getTodayTasks(){return this.tasks.filter((e=>a(e.getDate())))}getTomorrowTasks(){return this.tasks.filter((e=>i(e.getDate())))}getThisWeekTasks(){return this.tasks.filter((e=>{const t=e.getDate();return l(t)&&!(a(t)||i(t)||s(t))}))}getRemainingTasks(){return this.tasks.filter((e=>{const t=e.getDate();return s(t)&&!a(t)||!(i(t)||l(t))}))}sortTasksByPriority(){this.tasks.sort(((e,t)=>e.priority<t.priority?1:-1))}}var g,p=new Uint8Array(16);function y(){if(!g&&!(g="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(p)}const h=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,k=function(e){return"string"==typeof e&&h.test(e)};for(var T=[],f=0;f<256;++f)T.push((f+256).toString(16).substr(1));const j=function(e,t,s){var o=(e=e||{}).random||(e.rng||y)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){s=s||0;for(var r=0;r<16;++r)t[s+r]=o[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(T[e[t+0]]+T[e[t+1]]+T[e[t+2]]+T[e[t+3]]+"-"+T[e[t+4]]+T[e[t+5]]+"-"+T[e[t+6]]+T[e[t+7]]+"-"+T[e[t+8]]+T[e[t+9]]+"-"+T[e[t+10]]+T[e[t+11]]+T[e[t+12]]+T[e[t+13]]+T[e[t+14]]+T[e[t+15]]).toLowerCase();if(!k(s))throw TypeError("Stringified UUID is invalid");return s}(o)};class S{constructor(e,t,s,o){this.title=e,this.description=t,this.dueDate=s,this.priority=o||0,this.isCompleted=!1,this.id=j()}updateInfo(e,t,s,o){this.title=e,this.description=t,this.dueDate=s,this.priority=o}getDate(){return new Date(this.dueDate)}getFormattedDate(){return new Date(this.dueDate).toDateString()}}class v{constructor(){this.projects=[]}getProject(e){return this.projects.find((t=>t.name===e))}getProjects(){return this.projects}setProjects(e){this.projects=e}addProject(e){this.projects.push(e)}removeProject(e){const t=this.projects.findIndex((t=>t.name===e));this.projects.splice(t,1)}projectNameTaken(e){return this.projects.some((t=>t.name.toLowerCase()===e.toLowerCase()))}getTodayTasks(){const e=[];return this.getProjects().forEach((t=>e.push(...t.getTodayTasks()))),e}getTomorrowTasks(){const e=[];return this.getProjects().forEach((t=>e.push(...t.getTomorrowTasks()))),e}getWeeklyTasks(){const e=[];return this.getProjects().forEach((t=>e.push(...t.getThisWeekTasks()))),e}getRemainingTasks(){const e=[];return this.getProjects().forEach((t=>e.push(...t.getRemainingTasks()))),e}}class w{static updateTodoList(e){localStorage.setItem("todoList",JSON.stringify(e))}static getTodoList(){const e=Object.assign(new v,JSON.parse(localStorage.getItem("todoList")));return e.setProjects(e.getProjects().map((e=>Object.assign(new m,e)))),e.getProjects().forEach((e=>e.setTasks(e.getTasks().map((e=>Object.assign(new S,e)))))),e}static addProject(e){const t=w.getTodoList();t.addProject(new m(e)),w.updateTodoList(t)}static removeProject(e){const t=w.getTodoList();t.removeProject(e),w.updateTodoList(t)}static addTask(e,t){const s=w.getTodoList();s.getProject(t).addTask(e),w.updateTodoList(s)}static removeTask(e,t){const s=w.getTodoList();s.getProject(t).removeTask(e),w.updateTodoList(s)}}class L{static loadHomePage(){L.loadProjects(),L.loadHomePageTasks(),L.initMenuButtons(),L.initFormButtons()}static loadProjects(){const e=document.querySelector(".projects-scrollbar");e.textContent="",w.getTodoList().getProjects().forEach((t=>{e.appendChild(L.createProject(t))}))}static loadHomePageTasks(){const e=document.querySelector(".tasks-section");e.dataset.project="home",e.textContent="",e.append(L.createSection("today","Today",w.getTodoList().getTodayTasks()),L.createSection("tomorrow","Tomorrow",w.getTodoList().getTomorrowTasks()),L.createSection("weekly","Rest of Week",w.getTodoList().getWeeklyTasks()),L.createSection("remaining","Remaining",w.getTodoList().getRemainingTasks()))}static loadProject(e){const t=w.getTodoList().getProject(e),s=document.querySelector(".tasks-section");s.dataset.project=e,s.textContent="",s.append(L.createSection("today","Today",t.getTodayTasks()),L.createSection("tomorrow","Tomorrow",t.getTomorrowTasks()),L.createSection("weekly","Rest of Week",t.getThisWeekTasks()),L.createSection("remaining","Remaining",t.getRemainingTasks()))}static createProject(e){const t=document.createElement("div");return t.classList.add("project-entry"),t.dataset.name=e.name,t.innerHTML=`<h5 class='project-name'>${e.name}</h5>`,t.addEventListener("click",(e=>{const t=e.target.dataset.name;L.loadProject(t)})),t}static createSection(e,t,s){const o=document.createElement("div");o.classList.add(`${e}-section`);const r=s.reduce(((e,t)=>e+t.isCompleted),0);return o.innerHTML=`\n        <div class="tasks-header">\n        <h2 class="date-header">${t}</h2>\n            <div class="tasks-progress">\n                <p>${r}/${s.length}</p>\n            </div>\n        </div>`,o.appendChild(L.createTasks(s)),o}static createTasks(e){const t=document.createElement("ul");return t.classList.add("tasks"),e.forEach((e=>{const o=document.createElement("li");o.innerHTML=`\n            <div class="info">\n                <h5 class='task-name'>${e.title}</h5>\n                <div class='due-date-section'>\n                    <img src='./imgs/calendar.svg'>\n                    <span class='due-date'>${e.getFormattedDate()}</span>\n                </div>\n            </div>\n            <div class='btns'>\n                <img class='edit-btn' src='./imgs/more-horizontal.svg'>\n            </div>\n            `,s(e.getDate())&&!a(e.getDate())&&o.querySelector(".due-date").classList.add("expired"),o.dataset.id=e.id,t.appendChild(o)})),t}static initFormButtons(){const e=document.querySelector("#select-project"),t=document.querySelector("#select-task");e.addEventListener("click",L.toggleForm),t.addEventListener("click",L.toggleForm),document.querySelector("#add-btn").addEventListener("click",(()=>{L.loadFormInfo(),document.querySelector(".add-modal").style.display="flex"})),document.querySelector(".close-btn").addEventListener("click",(()=>{document.querySelector(".add-modal").style.display="none"})),document.querySelector("#add-project").onsubmit=L.handleProjectFormSubmit,document.querySelector("#add-task").onsubmit=L.handleTaskFormSubmit}static initMenuButtons(){document.querySelector("#home-btn").addEventListener("click",L.loadHomePageTasks)}static toggleForm(){this.classList.contains("selected")||("select-project"===this.id?(this.classList.add("selected"),document.querySelector("#add-project").style.display="flex",document.querySelector("#add-task").style.display="none",document.querySelector("#select-task").classList.remove("selected")):"select-task"===this.id&&(this.classList.add("selected"),document.querySelector("#add-task").style.display="flex",document.querySelector("#add-project").style.display="none",document.querySelector("#select-project").classList.remove("selected")))}static loadFormInfo(){const e=w.getTodoList().getProjects(),t=document.querySelector("#project-select");t.textContent="",e.forEach((e=>{const s=document.createElement("option");s.value=e.name,s.textContent=e.name,t.appendChild(s)}))}static handleProjectFormSubmit(e){e.preventDefault();const t=e.target.querySelector("#project-name").value;w.getTodoList().projectNameTaken(t)?document.querySelector("#project-name-error").textContent="Project name is already in use.":(w.addProject(t),L.cleanAddForm(),document.querySelector(".add-modal").style.display="none",L.loadProjects())}static handleTaskFormSubmit(e){e.preventDefault();const t=L.createTaskFromForm(),s=document.querySelector("#project-select").value;w.addTask(t,s),L.cleanAddForm(),document.querySelector(".add-modal").style.display="none";const o=document.querySelector(".tasks-section").dataset.project;"home"===o?L.loadHomePageTasks():L.loadProject(o)}static cleanAddForm(){const e=document.querySelector("#add-project"),t=document.querySelector("#add-task");e.reset(),t.reset(),document.querySelectorAll(".error-message").forEach((e=>e.textContent=""))}static createTaskFromForm(){return new S(document.querySelector("#task-name").value,document.querySelector("#task-description").value,new Date(document.querySelector("#task-due-date").value+"T00:00:00"),document.querySelector("#task-priority").value)}}document.querySelector(".menu-toggle").addEventListener("click",(()=>{document.querySelector(".menu").classList.toggle("menu-open")})),L.loadHomePage()})();